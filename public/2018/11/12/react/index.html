<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>react | 睡前总结</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="TIPS 可能引起组件更新:1、父组件重新render()或props改变; 2、this.setState()造成state改变  组件与Props 组件从概念上看就像是函数，它可以接收任意的输入值（称之为“props”），并返回一个需要在页面上展示的React元素。 所有的React组件必须像纯函数那样使用它们的props。 props与state: state和props之间最重要的">
<meta property="og:type" content="article">
<meta property="og:title" content="react">
<meta property="og:url" content="https://inceptiongt.github.io/2018/11/12/react/index.html">
<meta property="og:site_name" content="睡前总结">
<meta property="og:description" content="TIPS 可能引起组件更新:1、父组件重新render()或props改变; 2、this.setState()造成state改变  组件与Props 组件从概念上看就像是函数，它可以接收任意的输入值（称之为“props”），并返回一个需要在页面上展示的React元素。 所有的React组件必须像纯函数那样使用它们的props。 props与state: state和props之间最重要的">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/4118241-d979d05af0b7d4db.png">
<meta property="og:image" content="https://react.docschina.org/static/should-component-update-5ee1bdf4779af06072a17b7a0654f6db-9a3ff.png">
<meta property="og:updated_time" content="2018-12-27T06:58:53.812Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react">
<meta name="twitter:description" content="TIPS 可能引起组件更新:1、父组件重新render()或props改变; 2、this.setState()造成state改变  组件与Props 组件从概念上看就像是函数，它可以接收任意的输入值（称之为“props”），并返回一个需要在页面上展示的React元素。 所有的React组件必须像纯函数那样使用它们的props。 props与state: state和props之间最重要的">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/4118241-d979d05af0b7d4db.png">
  
    <link rel="alternate" href="/atom.xml" title="睡前总结" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">睡前总结</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://inceptiongt.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-react" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/12/react/" class="article-date">
  <time datetime="2018-11-12T04:06:52.000Z" itemprop="datePublished">2018-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      react
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h1><ul>
<li>可能引起组件更新:1、父组件重新render()或props改变; 2、this.setState()造成state改变</li>
</ul>
<h2 id="组件与Props"><a href="#组件与Props" class="headerlink" title="组件与Props"></a>组件与Props</h2><ul>
<li>组件从概念上看就像是函数，它可以接收任意的输入值（称之为“props”），并返回一个需要在页面上展示的React元素。</li>
<li>所有的React组件必须像纯函数那样使用它们的props。</li>
<li>props与state: state和props之间最重要的区别是props是从父组件传递的，而state是由组件本身管理的。组件不能改变其props，但可以改变state。 通过使用this.setState()。 只有定义为类的组件才可以具有状态。</li>
<li>受控 &amp; 非受控组件</li>
<li><a href="https://react.docschina.org/docs/thinking-in-react.html" target="_blank" rel="noopener">React 理念</a>1、按UI划分出组件层级；2、用React创建一个静态版本；3、确定哪些数据是state；4、确定你的State应该位于哪里。。。。。。</li>
</ul>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p><img src="https://upload-images.jianshu.io/upload_images/4118241-d979d05af0b7d4db.png" alt="生命周期图解">  </p>
<h3 id="避免重复渲染与shouldComponentUpdate应用"><a href="#避免重复渲染与shouldComponentUpdate应用" class="headerlink" title="避免重复渲染与shouldComponentUpdate应用"></a>避免重复渲染与shouldComponentUpdate应用</h3><ul>
<li>React组件更新DOM（调用浏览器DOMapi）决策<br>组件生命周期shouldComponentUpdate(preProps, preState)，默认返回 true，即始终会执行 render() 方法，然后做 Virtual DOM 比较，并得出是否需要做真实 DOM 更新；先看SCU，再看vDOMEq：<br><img src="https://react.docschina.org/static/should-component-update-5ee1bdf4779af06072a17b7a0654f6db-9a3ff.png" alt="渲染"><br>对其中每个组件来说，SCU表明了shouldComponentUpdate的返回内容，vDOMEq表明了待渲染的React元素与原始元素是否相等，最后，圆圈的颜色表明这个组件是否需要重新渲染。（绿色true，红色flase）</li>
<li>当一个组件的props或者state改变时，React通过比较新返回的元素（render()返回）和之前渲染的元素来决定是否有必要更新实际的DOM。当他们不相等时，React会更新DOM。</li>
<li>性能优化思路：如果你知道在某些情况下你的组件不需要更新，你可以在shouldComponentUpdate内返回false来跳过整个渲染进程，该进程包括了对该组件和之后的内容调用render()指令及Virtual DOM比较。</li>
<li>React.PureComponent（没看懂）</li>
</ul>
<h2 id="协调（Reconciliation）"><a href="#协调（Reconciliation）" class="headerlink" title="协调（Reconciliation）"></a>协调（Reconciliation）</h2><ul>
<li>关于Virtual DOM的比较算法，无约束的情况下算法时间复杂度O(n^3)。</li>
<li>约束两点，提高算法效率到O(n)<br>两个不同类型的元素将产生不同的树。<br>通过渲染器附带key属性，开发者可以示意哪些子元素可能是稳定的。（key必须在其兄弟节点中是唯一的，而非全局唯一）</li>
</ul>
<h1 id="高级指引"><a href="#高级指引" class="headerlink" title="高级指引"></a>高级指引</h1><h2 id="深入-JSX"><a href="#深入-JSX" class="headerlink" title="深入 JSX"></a>深入 JSX</h2><h3 id="指定-React-元素类型"><a href="#指定-React-元素类型" class="headerlink" title="指定 React 元素类型"></a>指定 React 元素类型</h3><h3 id="React-必须声明"><a href="#React-必须声明" class="headerlink" title="React 必须声明"></a>React 必须声明</h3><h3 id="点表示法"><a href="#点表示法" class="headerlink" title="点表示法"></a>点表示法</h3><h3 id="首字母大写"><a href="#首字母大写" class="headerlink" title="首字母大写"></a>首字母大写</h3><h3 id="在运行时选择类型"><a href="#在运行时选择类型" class="headerlink" title="在运行时选择类型"></a>在运行时选择类型</h3><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><h3 id="使用-JavaScript-表达式"><a href="#使用-JavaScript-表达式" class="headerlink" title="使用 JavaScript 表达式"></a>使用 JavaScript 表达式</h3><h3 id="字符串常量"><a href="#字符串常量" class="headerlink" title="字符串常量"></a>字符串常量</h3><h3 id="默认为-True"><a href="#默认为-True" class="headerlink" title="默认为 True"></a>默认为 True</h3><h3 id="扩展属性"><a href="#扩展属性" class="headerlink" title="扩展属性"></a>扩展属性</h3><h3 id="子代"><a href="#子代" class="headerlink" title="子代"></a>子代</h3><h3 id="字符串常量-1"><a href="#字符串常量-1" class="headerlink" title="字符串常量"></a>字符串常量</h3><h3 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h3><h3 id="JavaScript-表达式"><a href="#JavaScript-表达式" class="headerlink" title="JavaScript 表达式"></a>JavaScript 表达式</h3><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h3 id="布尔值、Null-和-Undefined-被忽略"><a href="#布尔值、Null-和-Undefined-被忽略" class="headerlink" title="布尔值、Null 和 Undefined 被忽略"></a>布尔值、Null 和 Undefined 被忽略</h3><h2 id="使用-PropTypes-检查类型"><a href="#使用-PropTypes-检查类型" class="headerlink" title="使用 PropTypes 检查类型"></a>使用 PropTypes 检查类型</h2><h3 id="PropTypes"><a href="#PropTypes" class="headerlink" title="PropTypes"></a>PropTypes</h3><h3 id="限制单个子代"><a href="#限制单个子代" class="headerlink" title="限制单个子代"></a>限制单个子代</h3><h3 id="属性默认值"><a href="#属性默认值" class="headerlink" title="属性默认值"></a>属性默认值</h3><h2 id="静态类型检查"><a href="#静态类型检查" class="headerlink" title="静态类型检查"></a>静态类型检查</h2><h3 id="Flow"><a href="#Flow" class="headerlink" title="Flow"></a>Flow</h3><h3 id="在一个项目中添加-Flow"><a href="#在一个项目中添加-Flow" class="headerlink" title="在一个项目中添加 Flow"></a>在一个项目中添加 Flow</h3><h3 id="从编译过的代码中剥离-Flow-语法"><a href="#从编译过的代码中剥离-Flow-语法" class="headerlink" title="从编译过的代码中剥离 Flow 语法"></a>从编译过的代码中剥离 Flow 语法</h3><h3 id="运行-Flow"><a href="#运行-Flow" class="headerlink" title="运行 Flow"></a>运行 Flow</h3><h3 id="添加-Flow-类型注释"><a href="#添加-Flow-类型注释" class="headerlink" title="添加 Flow 类型注释"></a>添加 Flow 类型注释</h3><h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><h3 id="在一个项目中添加-TypeScript"><a href="#在一个项目中添加-TypeScript" class="headerlink" title="在一个项目中添加 TypeScript"></a>在一个项目中添加 TypeScript</h3><h3 id="配置-TypeScript-编译器"><a href="#配置-TypeScript-编译器" class="headerlink" title="配置 TypeScript 编译器"></a>配置 TypeScript 编译器</h3><h3 id="文件扩展名"><a href="#文件扩展名" class="headerlink" title="文件扩展名"></a>文件扩展名</h3><h3 id="运行-TypeScript"><a href="#运行-TypeScript" class="headerlink" title="运行 TypeScript"></a>运行 TypeScript</h3><h3 id="类型定义"><a href="#类型定义" class="headerlink" title="类型定义"></a>类型定义</h3><h3 id="和-Create-React-App-一起使用-TypeScript"><a href="#和-Create-React-App-一起使用-TypeScript" class="headerlink" title="和 Create React App 一起使用 TypeScript"></a>和 Create React App 一起使用 TypeScript</h3><h3 id="Reason"><a href="#Reason" class="headerlink" title="Reason"></a>Reason</h3><h3 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h3><h3 id="其他语言"><a href="#其他语言" class="headerlink" title="其他语言"></a>其他语言</h3><h2 id="Refs-amp-DOM"><a href="#Refs-amp-DOM" class="headerlink" title="Refs &amp; DOM"></a>Refs &amp; DOM</h2><h3 id="Refs-提供了一种方式，用于访问在-render-方法中创建的-DOM-节点或-React-元素。"><a href="#Refs-提供了一种方式，用于访问在-render-方法中创建的-DOM-节点或-React-元素。" class="headerlink" title="Refs 提供了一种方式，用于访问在 render 方法中创建的 DOM 节点或 React 元素。"></a>Refs 提供了一种方式，用于访问在 render 方法中创建的 DOM 节点或 React 元素。</h3><h3 id="何时使用-Refs"><a href="#何时使用-Refs" class="headerlink" title="何时使用 Refs"></a>何时使用 Refs</h3><h3 id="不要过度使用-Refs"><a href="#不要过度使用-Refs" class="headerlink" title="不要过度使用 Refs"></a>不要过度使用 Refs</h3><h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><h3 id="创建-Refs"><a href="#创建-Refs" class="headerlink" title="创建 Refs"></a>创建 Refs</h3><h3 id="访问-Refs"><a href="#访问-Refs" class="headerlink" title="访问 Refs"></a>访问 Refs</h3><h3 id="对父组件暴露-DOM-节点"><a href="#对父组件暴露-DOM-节点" class="headerlink" title="对父组件暴露 DOM 节点"></a>对父组件暴露 DOM 节点</h3><h3 id="回调-Refs"><a href="#回调-Refs" class="headerlink" title="回调 Refs"></a>回调 Refs</h3><h3 id="旧版-API：String-类型的-Refs"><a href="#旧版-API：String-类型的-Refs" class="headerlink" title="旧版 API：String 类型的 Refs"></a>旧版 API：String 类型的 Refs</h3><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><h2 id="非受控组件"><a href="#非受控组件" class="headerlink" title="非受控组件"></a>非受控组件</h2><h2 id="性能优化-1"><a href="#性能优化-1" class="headerlink" title="性能优化"></a>性能优化</h2><h2 id="不使用-ES6"><a href="#不使用-ES6" class="headerlink" title="不使用 ES6"></a>不使用 ES6</h2><h2 id="不使用-JSX"><a href="#不使用-JSX" class="headerlink" title="不使用 JSX"></a>不使用 JSX</h2><h2 id="Reconciliation"><a href="#Reconciliation" class="headerlink" title="Reconciliation"></a>Reconciliation</h2><h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><h2 id="Fragments"><a href="#Fragments" class="headerlink" title="Fragments"></a>Fragments</h2><h2 id="Portals"><a href="#Portals" class="headerlink" title="Portals"></a>Portals</h2><h2 id="Error-Boundaries"><a href="#Error-Boundaries" class="headerlink" title="Error Boundaries"></a>Error Boundaries</h2><h2 id="Web-Components"><a href="#Web-Components" class="headerlink" title="Web Components"></a>Web Components</h2><h2 id="高阶组件"><a href="#高阶组件" class="headerlink" title="高阶组件"></a>高阶组件</h2><h2 id="传递-Refs"><a href="#传递-Refs" class="headerlink" title="传递 Refs"></a>传递 Refs</h2><h2 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h2><h2 id="与第三方库协同"><a href="#与第三方库协同" class="headerlink" title="与第三方库协同"></a>与第三方库协同</h2><h2 id="可访问性"><a href="#可访问性" class="headerlink" title="可访问性"></a>可访问性</h2><h2 id="Code-Splitting"><a href="#Code-Splitting" class="headerlink" title="Code-Splitting"></a>Code-Splitting</h2><h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><h1 id="API参考"><a href="#API参考" class="headerlink" title="API参考"></a>API参考</h1><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h2 id="React-Component"><a href="#React-Component" class="headerlink" title="React.Component"></a>React.Component</h2><h2 id="ReactDOM"><a href="#ReactDOM" class="headerlink" title="ReactDOM"></a>ReactDOM</h2><h2 id="ReactDOMServer"><a href="#ReactDOMServer" class="headerlink" title="ReactDOMServer"></a>ReactDOMServer</h2><h2 id="DOM-元素"><a href="#DOM-元素" class="headerlink" title="DOM 元素"></a>DOM 元素</h2><h2 id="合成事件"><a href="#合成事件" class="headerlink" title="合成事件"></a>合成事件</h2><h2 id="Test-Utilities"><a href="#Test-Utilities" class="headerlink" title="Test Utilities"></a>Test Utilities</h2><h2 id="浅层渲染"><a href="#浅层渲染" class="headerlink" title="浅层渲染"></a>浅层渲染</h2><h2 id="Test-Renderer"><a href="#Test-Renderer" class="headerlink" title="Test Renderer"></a>Test Renderer</h2><h2 id="JavaScript-环境要求"><a href="#JavaScript-环境要求" class="headerlink" title="JavaScript 环境要求"></a>JavaScript 环境要求</h2><h2 id="术语表"><a href="#术语表" class="headerlink" title="术语表"></a>术语表</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://inceptiongt.github.io/2018/11/12/react/" data-id="cjq24zpzb0003ieg5ebfxl6hl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/12/20/缓存/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          缓存
        
      </div>
    </a>
  
  
    <a href="/2018/10/10/待归档/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">待归档</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/24/wepback/">wepback</a>
          </li>
        
          <li>
            <a href="/2018/12/20/缓存/">缓存</a>
          </li>
        
          <li>
            <a href="/2018/11/12/react/">react</a>
          </li>
        
          <li>
            <a href="/2018/10/10/待归档/">待归档</a>
          </li>
        
          <li>
            <a href="/2018/09/21/JS运行时及闭包/">JS运行时及闭包</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 GT<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>